<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Idea Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .gradient-bg {
            background: radial-gradient(circle at center, #f3e8ff 0%, #e9d5ff 100%);
        }
    </style>
    
</head>


<body class="gradient-bg min-h-screen flex flex-col">
    <div class="flex justify-between items-center w-full p-4 mb-12">
        <div class="flex items-center gap-2">
            <a href="index.html">
                <img src="/img/Dev (1).png" alt="Logo" class="w-8 h-8 rounded-2xl">
            </a>
            <span class="font-semibold text-gray-700">DevGrowth</span>
        </div>
        <!-- Botón de Créditos -->
        <button id="creditButton" class="bg-purple-600 text-white px-4 py-2 rounded-lg shadow-sm hover:bg-purple-700 transition-all">
            Créditos: <span id="creditCount">5</span>
        </button>
    </div>
   

    <div class="bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto text-left text-gray-700 transform transition-transform duration-500 ease-in-out mt-8">
        <h3 class="text-xl font-bold mb-4">Business Ideas</h3>
        <!-- Formulario de Filtrado -->
        <form id="filterForm" class="flex flex-wrap gap-4 mb-4">
            <div class="flex-1 min-w-[150px]">
                    <label for="profile" class="block text-left text-gray-700 font-medium">Profile</label>
                    <select id="profile" class="w-full px-3 py-2 border rounded-lg">
                    <option value="all">All</option>
                        <option value="frontend">Frontend</option>
                        <option value="backend">Backend</option>
                        <option value="data">Data</option>
                    </select>
                </div>
            <div class="flex-1 min-w-[150px]">
                    <label for="experience" class="block text-left text-gray-700 font-medium">Experience</label>
                    <select id="experience" class="w-full px-3 py-2 border rounded-lg">
                    <option value="all">All</option>
                        <option value="1-3">1-3 years</option>
                        <option value="3-5">3-5 years</option>
                        <option value=">5">More than 5 years</option>
                    </select>
                </div>
            <div class="flex-1 min-w-[150px]">
                <label for="development" class="block text-left text-gray-700 font-medium">Development</label>
                    <select id="development" class="w-full px-3 py-2 border rounded-lg">
                    <option value="all">All</option>
                        <option value="extension">Extension</option>
                        <option value="saas">SaaS</option>
                        <option value="product">Product</option>
                    </select>
                </div>
            <button type="button" id="applyFilters" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition">Filtrar</button>
            </form>

        <!-- Lista de Ideas de Negocio -->
        <ul id="ideasList" class="list-none pl-0 space-y-4 max-h-60 overflow-y-auto"></ul>
        </div>

    <!-- Modal de bloqueo -->
    <div id="blockModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-6 rounded-lg shadow-lg max-w-md mx-auto text-center">
            <h2 class="text-2xl font-bold mb-4">Has alcanzado el límite de intentos</h2>
            <p class="text-gray-700 mb-4">Vuelve mañana para más intentos o suscríbete por $5 para acceso ilimitado.</p>
            <button id="subscribeButton" class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition">
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSdbPXCoi-beZCzwmwGt0auVPv21i__5xHGgEvAaY1mdX942iQ/viewform?usp=header" target="_blank" class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition">
                    Enviar Feedback
                </a>
            </button>
        </div>
    </div>

    <!-- Botón flotante para abrir el feedback -->
    <button 
        id="openFeedback" 
        class="fixed bottom-4 right-4 bg-purple-600 text-white rounded-full p-4 shadow-lg hover:bg-purple-700 transition-all z-40 flex items-center gap-2"
    >
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" st roke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-4l-4 4z"></path>
        </svg>
        <span>Feedback</span>
    </button>

    <!-- Banner de feedback (inicialmente oculto) -->
    <div id="feedbackCard" class="fixed top-0 left-0 right-0 bg-white shadow-md transform transition-transform duration-500 ease-in-out -translate-y-full z-40">
        <div class="max-w-4xl mx-auto p-4">
            <div class="flex justify-between items-start">
                <div class="flex-grow">
                    <h3 class="text-xl font-bold mb-4 text-gray-900">¡Ayúdanos a mejorar!</h3>
                    
                    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdbPXCoi-beZCzwmwGt0auVPv21i__5xHGgEvAaY1mdX942iQ/viewform?usp=header" width="640" height="480" frameborder="0" marginheight="0" marginwidth="0">Cargando…</iframe>
                </div>
                
                <!-- Botón para cerrar -->
                <button 
                    id="closeFeedback" 
                    class="text-gray-500 hover:text-gray-700 focus:outline-none"
                    aria-label="Cerrar feedback">
                    ×
                </button>
            </div>
        </div>
    </div>

    <!-- Modal con animaciones -->
    <div id="ideaModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="bg-white p-6 rounded-lg max-w-2xl mx-auto mt-20">
            <div class="relative">
                <h3 id="modalTitle" class="text-2xl font-bold mb-4 pr-8"></h3>
                <button 
                    id="closeModal" 
                    class="absolute top-0 right-0 text-gray-400 hover:text-gray-600 text-2xl font-bold"
                    aria-label="Cerrar modal"
                >
                    ×
                </button>
            </div>
            
            <p id="modalContent" class="text-gray-600 mb-4"></p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <h4 class="font-semibold mb-2">Problema</h4>
                    <p id="modalProblem" class="text-gray-600"></p>
                </div>
                <div>
                    <h4 class="font-semibold mb-2">Monetización</h4>
                    <div id="modalMonetization" class="text-gray-600"></div>
                </div>
            </div>
            <div class="mt-4">
                <h4 class="font-semibold mb-2">Preguntas</h4>
                <ul id="modalQuestions" class="list-disc pl-5 text-gray-600"></ul>
            </div>
        </div>
    </div>

    <script>
        const ideaTemplates = {
            "frontend": [
                {
                    "category": "extension",
                    "products": [
                        {
                            "base": "{type} Developer Tool",
                            "types": ["Color Picker", "CSS Generator", "Responsive Tester", "Performance", "A11y", "Code Formatter"],
                            "details": "Herramienta esencial para desarrollo {type}",
                            "monetization": [
                                { "plan": "Free", "price": "Gratis", "limit": "Funciones básicas" },
                                { "plan": "Pro", "price": "$4.99/mes", "limit": "Funciones avanzadas" },
                                { "plan": "Team", "price": "$3.99/usuario/mes", "limit": "Colaboración" }
                            ],
                            "problem": "Desarrolladores necesitan herramientas especializadas para agilizar su trabajo diario",
                            "questions": [
                                "¿Qué herramientas similares usas actualmente?",
                                "¿Cuánto tiempo dedicas a estas tareas?",
                                "¿Qué características te faltan en tus herramientas actuales?",
                                "¿Trabajas en equipo o solo?",
                                "¿Cuánto pagarías por una herramienta que te ahorre tiempo?"
                            ]
                        },
                        {
                            "base": "{type} Inspector",
                            "types": ["Architecture", "Bundle Size", "Security", "Performance", "Code Quality"],
                            "details": "Inspector avanzado de {type} para desarrollo web",
                            "monetization": [
                                { "plan": "Basic", "price": "Gratis", "limit": "3 proyectos" },
                                { "plan": "Pro", "price": "$9.99/mes", "limit": "Proyectos ilimitados" },
                                { "plan": "Enterprise", "price": "$49.99/mes", "limit": "Características avanzadas" }
                            ],
                            "problem": "Equipos necesitan analizar y optimizar su código frontend",
                            "questions": [
                                "¿Cómo inspeccionas tu código actualmente?",
                                "¿Qué métricas son importantes para ti?",
                                "¿Qué problemas son difíciles de detectar?",
                                "¿Cómo manejas la calidad del código en equipo?",
                                "¿Qué herramientas de análisis usas?"
                            ]
                        }
                    ]
                },
                {
                    "category": "saas",
                    "products": [
                        {
                            "base": "{type} Builder Platform",
                            "types": ["Template", "Landing Page", "Portfolio", "Component", "Design System"],
                            "details": "Plataforma para crear {type} profesionales",
                            "monetization": [
                                { "plan": "Starter", "price": "$29/mes", "limit": "5 proyectos" },
                                { "plan": "Professional", "price": "$79/mes", "limit": "20 proyectos" },
                                { "plan": "Agency", "price": "$199/mes", "limit": "Proyectos ilimitados" }
                            ],
                            "problem": "Crear y mantener recursos frontend requiere mucho tiempo y experiencia",
                            "questions": [
                                "¿Cómo creas estos recursos actualmente?",
                                "¿Cuánto tiempo inviertes en cada proyecto?",
                                "¿Qué frustraciones tienes con el proceso actual?",
                                "¿Trabajas con diseñadores?",
                                "¿Qué características te harían la vida más fácil?"
                            ]
                        },
                        {
                            "base": "{type} Management System",
                            "types": ["Component", "Design Token", "Documentation", "Testing", "Deployment"],
                            "details": "Sistema de gestión {type} para equipos frontend",
                            "monetization": [
                                { "plan": "Team", "price": "$99/mes", "limit": "10 usuarios" },
                                { "plan": "Business", "price": "$249/mes", "limit": "50 usuarios" },
                                { "plan": "Enterprise", "price": "Personalizado", "limit": "Características personalizadas" }
                            ],
                            "problem": "Equipos necesitan centralizar y gestionar recursos frontend",
                            "questions": [
                                "¿Cómo gestionas estos recursos ahora?",
                                "¿Cuántas personas trabajan en tu equipo?",
                                "¿Qué problemas de colaboración enfrentas?",
                                "¿Cómo manejas las versiones?",
                                "¿Qué procesos te gustaría automatizar?"
                            ]
                        }
                    ]
                },
                {
                    "category": "product",
                    "products": [
                        {
                            "base": "{type} Enterprise Solution",
                            "types": ["Design System", "Component Library", "Frontend Platform", "CI/CD", "Monitoring"],
                            "details": "Solución empresarial {type} completa",
                            "monetization": [
                                { "plan": "Licencia", "price": "$15,000/año", "limit": "1 equipo" },
                                { "plan": "Enterprise", "price": "$45,000/año", "limit": "Múltiples equipos" },
                                { "plan": "Global", "price": "Personalizado", "limit": "Organización completa" }
                            ],
                            "problem": "Empresas necesitan soluciones frontend escalables y mantenibles",
                            "questions": [
                                "¿Qué soluciones usas actualmente?",
                                "¿Cuántos desarrolladores tienen?",
                                "¿Qué desafíos de escalabilidad enfrentas?",
                                "¿Cómo manejas la consistencia?",
                                "¿Qué costos tienes actualmente?"
                            ]
                        }
                    ]
                }
            ],
            "backend": [
                {
                    "category": "extension",
                    "products": [
                        {
                            "base": "{type} Development Assistant",
                            "types": ["API", "Database", "Log", "Performance", "Security"],
                            "details": "Asistente de desarrollo {type} para backend",
                            "monetization": [
                                { "plan": "Free", "price": "Gratis", "limit": "Uso básico" },
                                { "plan": "Pro", "price": "$7.99/mes", "limit": "Uso ilimitado" },
                                { "plan": "Team", "price": "$5.99/usuario/mes", "limit": "Colaboración" }
                            ],
                            "problem": "Desarrolladores backend necesitan herramientas para debugging y testing",
                            "questions": [
                                "¿Qué herramientas de desarrollo usas?",
                                "¿Cuánto tiempo dedicas a testing?",
                                "¿Qué problemas son difíciles de debuggear?",
                                "¿Cómo monitorizas el rendimiento?",
                                "¿Qué características te faltan en tus herramientas?"
                            ]
                        },
                        {
                            "base": "{type} System Monitor",
                            "types": ["Resource", "Health", "Architecture", "Security", "Quality"],
                            "details": "Monitor de sistema {type} para backend",
                            "monetization": [
                                { "plan": "Basic", "price": "$19.99/mes", "limit": "5 servicios" },
                                { "plan": "Pro", "price": "$49.99/mes", "limit": "20 servicios" },
                                { "plan": "Enterprise", "price": "$199.99/mes", "limit": "Ilimitado" }
                            ],
                            "problem": "Equipos necesitan monitorizar y mantener sistemas backend",
                            "questions": [
                                "¿Cómo monitorizas tus sistemas?",
                                "¿Qué métricas son críticas?",
                                "¿Cómo manejas los incidentes?",
                                "¿Qué alertas necesitas?",
                                "¿Cuánto tiempo dedicas al mantenimiento?"
                            ]
                        }
                    ]
                },
                {
                    "category": "saas",
                    "products": [
                        {
                            "base": "{type} Management Platform",
                            "types": ["API", "Serverless", "Microservice", "Database", "Cache"],
                            "details": "Plataforma de gestión {type} para backend",
                            "monetization": [
                                { "plan": "Startup", "price": "$99/mes", "limit": "100k requests" },
                                { "plan": "Business", "price": "$299/mes", "limit": "1M requests" },
                                { "plan": "Enterprise", "price": "Custom", "limit": "Personalizado" }
                            ],
                            "problem": "Empresas necesitan gestionar servicios backend eficientemente",
                            "questions": [
                                "¿Cómo gestionas tus servicios?",
                                "¿Qué volumen de requests manejas?",
                                "¿Qué problemas de escalabilidad tienes?",
                                "¿Cómo manejas los despliegues?",
                                "¿Qué costos de infraestructura tienes?"
                            ]
                        },
                        {
                            "base": "{type} Integration Service",
                            "types": ["Message Queue", "Service Mesh", "API Gateway", "Load Balancer", "Service Discovery"],
                            "details": "Servicio de integración {type} para backend",
                            "monetization": [
                                { "plan": "Basic", "price": "$199/mes", "limit": "5 servicios" },
                                { "plan": "Pro", "price": "$499/mes", "limit": "20 servicios" },
                                { "plan": "Enterprise", "price": "Custom", "limit": "Ilimitado" }
                            ],
                            "problem": "Integrar y coordinar servicios backend es complejo",
                            "questions": [
                                "¿Cómo integras tus servicios?",
                                "¿Qué problemas de comunicación tienes?",
                                "¿Cómo manejas la latencia?",
                                "¿Qué patrones de integración usas?",
                                "¿Cómo aseguras la fiabilidad?"
                            ]
                        }
                    ]
                },
                {
                    "category": "product",
                    "products": [
                        {
                            "base": "{type} Enterprise Platform",
                            "types": ["Multi-Cloud", "Container Orchestration", "Distributed System", "Integration", "Monitoring"],
                            "details": "Plataforma empresarial {type} para backend",
                            "monetization": [
                                { "plan": "Department", "price": "$25,000/año", "limit": "1 departamento" },
                                { "plan": "Division", "price": "$75,000/año", "limit": "Múltiples departamentos" },
                                { "plan": "Enterprise", "price": "Custom", "limit": "Organización completa" }
                            ],
                            "problem": "Empresas necesitan plataformas backend robustas y escalables",
                            "questions": [
                                "¿Qué plataformas usas actualmente?",
                                "¿Cuántos servicios gestionas?",
                                "¿Qué desafíos de escalabilidad tienes?",
                                "¿Cómo manejas el multi-cloud?",
                                "¿Qué costos de infraestructura tienes?"
                            ]
                        }
                    ]
                }
            ],
            "data": [
                {
                    "category": "extension",
                    "products": [
                        {
                            "base": "{type} Data Tool",
                            "types": ["Cleaning", "Visualization", "ETL", "Quality", "Profiling"],
                            "details": "Herramienta {type} para datos",
                            "monetization": [
                                { "plan": "Free", "price": "Gratis", "limit": "1000 filas/mes" },
                                { "plan": "Pro", "price": "$9.99/mes", "limit": "Ilimitado" },
                                { "plan": "Team", "price": "$7.99/usuario/mes", "limit": "Colaboración" }
                            ],
                            "problem": "Analistas necesitan herramientas eficientes para trabajar con datos",
                            "questions": [
                                "¿Qué herramientas de datos usas?",
                                "¿Cuánto tiempo dedicas a limpiar datos?",
                                "¿Qué problemas son recurrentes?",
                                "¿Cómo visualizas los datos?",
                                "¿Qué automatizaciones necesitas?"
                            ]
                        },
                        {
                            "base": "{type} Data Explorer",
                            "types": ["SQL", "NoSQL", "Graph", "Time-series", "Document"],
                            "details": "Explorador de datos {type} avanzado",
                            "monetization": [
                                { "plan": "Basic", "price": "$14.99/mes", "limit": "3 conexiones" },
                                { "plan": "Pro", "price": "$39.99/mes", "limit": "10 conexiones" },
                                { "plan": "Enterprise", "price": "$199.99/mes", "limit": "Ilimitado" }
                            ],
                            "problem": "Equipos necesitan explorar y analizar datos eficientemente",
                            "questions": [
                                "¿Cómo exploras datos actualmente?",
                                "¿Qué tipos de bases de datos usas?",
                                "¿Qué análisis son complejos?",
                                "¿Cómo compartes los hallazgos?",
                                "¿Qué visualizaciones necesitas?"
                            ]
                        }
                    ]
                },
                {
                    "category": "saas",
                    "products": [
                        {
                            "base": "{type} Analytics Platform",
                            "types": ["Predictive", "Real-time", "Big Data", "ML", "BI"],
                            "details": "Plataforma de análisis {type}",
                            "monetization": [
                                { "plan": "Startup", "price": "$199/mes", "limit": "100k eventos" },
                                { "plan": "Growth", "price": "$499/mes", "limit": "1M eventos" },
                                { "plan": "Enterprise", "price": "Custom", "limit": "Personalizado" }
                            ],
                            "problem": "Empresas necesitan analizar grandes volúmenes de datos",
                            "questions": [
                                "¿Cómo analizas datos actualmente?",
                                "¿Qué volumen de datos manejas?",
                                "¿Qué insights son valiosos?",
                                "¿Cómo usas ML/AI?",
                                "¿Qué decisiones tomas con datos?"
                            ]
                        },
                        {
                            "base": "{type} Data Platform",
                            "types": ["Lake", "Warehouse", "Pipeline", "Governance", "Quality"],
                            "details": "Plataforma de datos {type} empresarial",
                            "monetization": [
                                { "plan": "Team", "price": "$999/mes", "limit": "500GB" },
                                { "plan": "Business", "price": "$2,499/mes", "limit": "5TB" },
                                { "plan": "Enterprise", "price": "Custom", "limit": "Ilimitado" }
                            ],
                            "problem": "Organizaciones necesitan gestionar datos a escala",
                            "questions": [
                                "¿Cómo almacenas tus datos?",
                                "¿Qué fuentes de datos tienes?",
                                "¿Cómo aseguras la calidad?",
                                "¿Qué problemas de integración tienes?",
                                "¿Cómo manejas el gobierno de datos?"
                            ]
                        }
                    ]
                },
                {
                    "category": "product",
                    "products": [
                        {
                            "base": "{type} Enterprise Solution",
                            "types": ["Data Science", "ML Ops", "Data Ops", "Analytics", "AI"],
                            "details": "Solución empresarial {type} completa",
                            "monetization": [
                                { "plan": "Department", "price": "$50,000/año", "limit": "1 departamento" },
                                { "plan": "Division", "price": "$150,000/año", "limit": "Múltiples departamentos" },
                                { "plan": "Enterprise", "price": "Custom", "limit": "Organización completa" }
                            ],
                            "problem": "Empresas necesitan soluciones de datos end-to-end",
                            "questions": [
                                "¿Qué soluciones de datos usas?",
                                "¿Cómo implementas ML/AI?",
                                "¿Qué desafíos de datos tienes?",
                                "¿Cómo mides el ROI?",
                                "¿Qué capacidades necesitas?"
                            ]
                        }
                    ]
                }
            ]
        };

        document.getElementById('applyFilters').addEventListener('click', function() {
            const profile = document.getElementById('profile').value;
            const experience = document.getElementById('experience').value;
            const development = document.getElementById('development').value;
            const ideasList = document.getElementById('ideasList');
            
            // Limpiar la lista anterior
            ideasList.innerHTML = '';
            
            // Generar nuevas ideas basadas en los filtros
            const filteredIdeas = generateFilteredIdeas(profile, experience, development);
            filteredIdeas.forEach(idea => {
                    const li = document.createElement('li');
                    li.classList.add(
                        'bg-white', 'p-4', 'rounded-lg', 'shadow-md', 
                        'hover:shadow-lg', 'transition', 'cursor-pointer', 'mb-4'
                    );

                    // Crear el header con el título y las estrellas
                    const header = document.createElement('div');
                    header.classList.add('flex', 'justify-between', 'items-center', 'mb-2');

                    // Título
                    const title = document.createElement('h4');
                    title.classList.add('text-lg', 'font-bold', 'text-gray-900');
                    title.textContent = idea.text;

                    // Estrellas
                    const starsContainer = document.createElement('div');
                    starsContainer.classList.add('flex', 'items-center');
                    for (let j = 0; j < 5; j++) {
                        const star = document.createElement('span');
                        star.classList.add(j < idea.stars ? 'text-yellow-500' : 'text-gray-300');
                        star.textContent = '★';
                        starsContainer.appendChild(star);
                    }

                    header.appendChild(title);
                    header.appendChild(starsContainer);

                    // Descripción breve
                    const description = document.createElement('p');
                    description.classList.add('text-sm', 'text-gray-600');
                    description.textContent = idea.details;

                    li.appendChild(header);
                    li.appendChild(description);
                    ideasList.appendChild(li);

                    // Agregar evento click para mostrar más detalles
                    li.addEventListener('click', () => showIdeaDetails(idea));
            });

            // Si no hay ideas, mostrar mensaje
            if (ideasList.children.length === 0) {
                const li = document.createElement('li');
                li.classList.add('text-gray-600', 'text-center', 'py-4');
                li.textContent = 'No se encontraron ideas para esta combinación. ¡Intenta con otros filtros!';
                ideasList.appendChild(li);
            }
        });

        function generateFilteredIdeas(profile, experience, development) {
            const ideas = [];
            const profiles = profile === 'all' ? Object.keys(ideaTemplates) : [profile];
            profiles.forEach(p => {
                const profileIdeas = ideaTemplates[p];
                profileIdeas.forEach(category => {
                    if (development === 'all' || category.category === development) {
                        category.products.forEach(product => {
                            product.types.forEach(type => {
                                ideas.push({
                                    text: product.base.replace('{type}', type),
                                    details: product.details.replace('{type}', type),
                                    stars: Math.floor(Math.random() * 2) + 4,
                                    monetization: product.monetization
                                        .slice(0, 3) // Limitar a 3 planes
                                        .map(m => `${m.plan}: ${m.price}${m.limit ? ` (${m.limit})` : ''}`),
                                    problem: product.problem,
                                    questions: product.questions.slice(0, 5) // Limitar a 5 preguntas
                                });
                            });
                        });
                    }
                });
            });
            return ideas;
        }

        // Nuevo manejador para el botón de feedback
        document.getElementById('openFeedback').addEventListener('click', function() {
            const feedbackCard = document.getElementById('feedbackCard');
            feedbackCard.classList.remove('-translate-y-full');
        });

        // Mantener el resto de la lógica del feedback
        document.getElementById('closeFeedback').addEventListener('click', function() {
            const feedbackCard = document.getElementById('feedbackCard');
            feedbackCard.classList.add('-translate-y-full');
        });

        // Manejar el rating con estrellas
        document.getElementById('ratingStars').addEventListener('click', function(e) {
            if (e.target.tagName === 'BUTTON') {
                const rating = e.target.dataset.rating;
                const stars = this.getElementsByTagName('button');
                
                // Resetear todas las estrellas
                Array.from(stars).forEach(star => {
                    star.classList.remove('text-yellow-500');
                    star.classList.add('text-gray-300');
                });
                
                // Colorear hasta la estrella seleccionada
                for (let i = 0; i < rating; i++) {
                    stars[i].classList.remove('text-gray-300');
                    stars[i].classList.add('text-yellow-500');
                }
            }
        });

        // Manejar el envío del feedback
        function sendFeedback(feedback, email) {
            fetch('https://cors-anywhere.herokuapp.com/YOUR_SCRIPT_URL', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ feedback: feedback, email: email })
            })
            .then(response => response.json())
            .then(data => console.log(data))
            .catch(error => console.error('Error:', error));
        }

        document.getElementById('feedbackForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const feedback = document.getElementById('feedbackComment').value;
            const email = document.getElementById('feedbackEmail').value;
            sendFeedback(feedback, email);
        });

        // Modificar la función de mostrar el modal para incluir las animaciones
        function showIdeaDetails(idea) {
            if (!idea) return;

            const modal = document.getElementById('ideaModal');
            if (!modal) return;

            // Verificar que todos los elementos existen antes de actualizarlos
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');
            const modalProblem = document.getElementById('modalProblem');
            const modalMonetization = document.getElementById('modalMonetization');
            const modalQuestions = document.getElementById('modalQuestions');

            if (!modalTitle || !modalContent || !modalProblem || !modalMonetization || !modalQuestions) {
                console.error('Elementos del modal no encontrados');
                return;
            }

            try {
                // Actualizar contenido
                modalTitle.textContent = idea.text || '';
                modalContent.textContent = idea.details || '';
                modalProblem.textContent = idea.problem || '';
                
                // Actualizar monetización
                if (Array.isArray(idea.monetization)) {
                    modalMonetization.innerHTML = idea.monetization
                        .filter(item => item) // Filtrar items nulos
                        .join('<br>');
                } else {
                    modalMonetization.textContent = idea.monetization || '';
                }
                
                // Actualizar preguntas
                if (Array.isArray(idea.questions)) {
                    modalQuestions.innerHTML = idea.questions
                        .filter(q => q) // Filtrar preguntas nulas
                        .map(q => `<li class="mb-2">${q}</li>`)
                        .join('');
                } else {
                    modalQuestions.innerHTML = '';
                }

                // Mostrar modal
                modal.classList.remove('hidden', 'opacity-0');
            } catch (error) {
                console.error('Error al mostrar los detalles:', error);
            }
        }

        // Modificar el cierre del modal para incluir las animaciones
        function closeModal() {
            const modal = document.getElementById('ideaModal');
            if (modal) {
                modal.classList.add('opacity-0');
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }
        }

        // Actualizar los event listeners para usar la nueva función de cierre
        const closeModalButton = document.getElementById('closeModal');
        if (closeModalButton) {
            closeModalButton.addEventListener('click', closeModal);
        }

        document.getElementById('ideaModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // Agregar listener para el cambio de selección
        document.getElementById('profile').addEventListener('change', cleanupModal);
        document.getElementById('experience').addEventListener('change', cleanupModal);
        document.getElementById('development').addEventListener('change', cleanupModal);

        function cleanupModal() {
            const modal = document.getElementById('ideaModal');
            if (modal) {
                modal.classList.add('hidden', 'opacity-0');
            }
        }

        // Función para actualizar los créditos
        function updateCredits(newCredits) {
            document.getElementById('creditCount').textContent = newCredits === 'unlimited' ? '∞' : newCredits;
        }

        // Ejemplo de uso: actualizar créditos a 6
        // updateCredits(6);

        // Función para inicializar la lista de ideas al cargar la página
        function initializeIdeas() {
            const ideasList = document.getElementById('ideasList');
            const filteredIdeas = generateFilteredIdeas('all', 'all', 'all'); // Generar ideas sin filtros

            filteredIdeas.forEach(idea => {
                const li = document.createElement('li');
                li.classList.add(
                    'bg-white', 'p-4', 'rounded-lg', 'shadow-md', 
                    'hover:shadow-lg', 'transition', 'cursor-pointer', 'mb-4'
                );

                // Crear el header con el título y las estrellas
                const header = document.createElement('div');
                header.classList.add('flex', 'justify-between', 'items-center', 'mb-2');

                // Título
                const title = document.createElement('h4');
                title.classList.add('text-lg', 'font-bold', 'text-gray-900');
                title.textContent = idea.text;

                // Estrellas
                const starsContainer = document.createElement('div');
                starsContainer.classList.add('flex', 'items-center');
                for (let j = 0; j < 5; j++) {
                    const star = document.createElement('span');
                    star.classList.add(j < idea.stars ? 'text-yellow-500' : 'text-gray-300');
                    star.textContent = '★';
                    starsContainer.appendChild(star);
                }

                header.appendChild(title);
                header.appendChild(starsContainer);

                // Descripción breve
                const description = document.createElement('p');
                description.classList.add('text-sm', 'text-gray-600');
                description.textContent = idea.details;

                li.appendChild(header);
                li.appendChild(description);
                ideasList.appendChild(li);

                // Agregar evento click para mostrar más detalles
                li.addEventListener('click', () => showIdeaDetails(idea));
            });

            // Si no hay ideas, mostrar mensaje
            if (ideasList.children.length === 0) {
                const li = document.createElement('li');
                li.classList.add('text-gray-600', 'text-center', 'py-4');
                li.textContent = 'No se encontraron ideas para esta combinación. ¡Intenta con otros filtros!';
                ideasList.appendChild(li);
            }
        }

        // Llamar a la función de inicialización al cargar la página
        document.addEventListener('DOMContentLoaded', initializeIdeas);

        // Inicializar el contador de intentos
        function initializeAttempts() {
            if (!localStorage.getItem('attempts')) {
                localStorage.setItem('attempts', '5');
            }
            updateCredits(localStorage.getItem('attempts'));
        }

        // Manejar el intento de aplicar filtros
        function handleAttempt() {
            let attempts = parseInt(localStorage.getItem('attempts'), 10);
            console.log('Intentos antes de aplicar:', attempts);
            if (attempts > 0) {
                attempts -= 1;
                localStorage.setItem('attempts', attempts.toString());
                updateCredits(attempts);
                console.log('Intentos después de aplicar:', attempts);
                applyFilters();
            } else {
                showBlockModal();
                disableInteractions();
            }
        }

        // Mostrar modal de bloqueo
        function showBlockModal() {
            document.getElementById('blockModal').classList.remove('hidden');
        }

        // Desactivar interacciones
        function disableInteractions() {
            document.querySelectorAll('button, select').forEach(element => {
                if (element.id !== 'openFeedback') {
                    element.disabled = true;
                }
            });
        }

        // Función para aplicar filtros (ejemplo)
        function applyFilters() {
            // Lógica para aplicar filtros
            console.log('Filtros aplicados');
        }

        document.getElementById('applyFilters').addEventListener('click', handleAttempt);

        // Llamar a la función de inicialización al cargar la página
        document.addEventListener('DOMContentLoaded', () => {
            initializeIdeas();
            initializeAttempts();
        });

        // Simular suscripción
        function registerPurchase() {
            fetch('https://cors-anywhere.herokuapp.com/YOUR_SCRIPT_URL', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ amount: 5, user: 'anonymous' })
            })
            .then(response => response.json())
            .then(data => console.log(data))
            .catch(error => console.error('Error:', error));
        }

        // Llama a esta función cuando el usuario haga clic en el botón de suscripción
        document.getElementById('subscribeButton').addEventListener('click', function() {
            registerPurchase();
            alert('Gracias por suscribirte. Ahora tienes acceso ilimitado.');
            localStorage.setItem('attempts', 'unlimited');
            document.getElementById('blockModal').classList.add('hidden');
            enableInteractions();
        });

        // Habilitar interacciones
        function enableInteractions() {
            document.querySelectorAll('button, select').forEach(element => {
                element.disabled = false;
            });
        }

        // Verificar el tamaño de localStorage
        function checkLocalStorageSize() {
            let total = 0;
            for (let x in localStorage) {
                if (localStorage.hasOwnProperty(x)) {
                    total += (localStorage[x].length * 2) / 1024 / 1024; // Convertir a MB
                }
            }
            console.log("Total localStorage size: " + total.toFixed(2) + " MB");
        }

        // Llamar a la función para verificar el tamaño
        checkLocalStorageSize();

        // Limpiar elementos específicos si es necesario
        function clearUnnecessaryLocalStorage() {
            // Lista de claves que deseas eliminar
            const keysToRemove = ['key1', 'key2', 'key3'];
            keysToRemove.forEach(key => localStorage.removeItem(key));
        }

        // Llamar a la función para limpiar
        clearUnnecessaryLocalStorage();
    </script>
</body>
</html>
